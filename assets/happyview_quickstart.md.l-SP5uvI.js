import{_ as a,o as i,c as e,ag as t}from"./chunks/framework.BSbZkL3e.js";const c=JSON.parse('{"title":"Quickstart","description":"","frontmatter":{},"headers":[],"relativePath":"happyview/quickstart.md","filePath":"happyview/quickstart.md"}'),n={name:"happyview/quickstart.md"};function l(p,s,h,r,o,k){return i(),e("div",null,[...s[0]||(s[0]=[t(`<h1 id="quickstart" tabindex="-1">Quickstart <a class="header-anchor" href="#quickstart" aria-label="Permalink to &quot;Quickstart&quot;">​</a></h1><h2 id="deploy-on-railway" tabindex="-1">Deploy on Railway <a class="header-anchor" href="#deploy-on-railway" aria-label="Permalink to &quot;Deploy on Railway&quot;">​</a></h2><p>The fastest way to get HappyView running is with Railway. This template deploys HappyView, AIP, Tap, and Postgres with a single click:</p><p><a href="https://railway.com/deploy/I1jvZl?referralCode=0QOgj_" target="_blank" rel="noreferrer"><img src="https://railway.com/button.svg" alt="Deploy on Railway"></a></p><h3 id="required-configuration" tabindex="-1">Required configuration <a class="header-anchor" href="#required-configuration" aria-label="Permalink to &quot;Required configuration&quot;">​</a></h3><p>After deploying the template, you&#39;ll need to configure a few things before the stack works properly:</p><ol><li><p><strong>Set your admin DID.</strong> In the AIP service variables, set <code>ADMIN_DIDS</code> to your AT Protocol DID (e.g. <code>did:plc:abc123...</code>). You can find your DID by looking up your handle on <a href="https://internect.info/" target="_blank" rel="noreferrer">Internect</a>.</p></li><li><p><strong>Generate AIP signing keys.</strong> The <code>OAUTH_SIGNING_KEYS</code> and <code>ATPROTO_OAUTH_SIGNING_KEYS</code> variables require multibase-encoded P-256 private keys. See the <a href="https://github.com/graze-social/aip/blob/main/CONFIGURATION.md#signing-keys" target="_blank" rel="noreferrer">AIP Signing Keys documentation</a> for generation instructions.</p></li><li><p><strong>Generate public URLs.</strong> The services won&#39;t work until HappyView and AIP have public domains assigned in Railway.</p></li></ol><h2 id="local-development" tabindex="-1">Local development <a class="header-anchor" href="#local-development" aria-label="Permalink to &quot;Local development&quot;">​</a></h2><h3 id="prerequisites" tabindex="-1">Prerequisites <a class="header-anchor" href="#prerequisites" aria-label="Permalink to &quot;Prerequisites&quot;">​</a></h3><ul><li>Rust (stable)</li><li>PostgreSQL 17+</li><li>A running <a href="https://github.com/graze-social/aip" target="_blank" rel="noreferrer">AIP</a> instance</li></ul><h3 id="_1-clone-and-configure" tabindex="-1">1. Clone and configure <a class="header-anchor" href="#_1-clone-and-configure" aria-label="Permalink to &quot;1. Clone and configure&quot;">​</a></h3><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/graze-social/happyview.git</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> happyview</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .env.example</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .env</span></span></code></pre></div><p>Edit <code>.env</code>:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DATABASE_URL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">postgres://happyview:happyview@localhost/happyview</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">AIP_URL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">http://localhost:8080</span></span></code></pre></div><p>See <a href="./configuration.html">Configuration</a> for all available variables.</p><h3 id="_2-start-postgres-and-run-migrations" tabindex="-1">2. Start Postgres and run migrations <a class="header-anchor" href="#_2-start-postgres-and-run-migrations" aria-label="Permalink to &quot;2. Start Postgres and run migrations&quot;">​</a></h3><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> postgres</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cargo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span></span></code></pre></div><p>Migrations run automatically on startup.</p><h3 id="_3-upload-a-lexicon" tabindex="-1">3. Upload a lexicon <a class="header-anchor" href="#_3-upload-a-lexicon" aria-label="Permalink to &quot;3. Upload a lexicon&quot;">​</a></h3><p>The first authenticated request to an admin endpoint auto-creates you as the initial admin. Authenticate with an AIP-issued Bearer token:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -X</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> POST</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://localhost:3000/admin/lexicons</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Authorization: Bearer </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$TOKEN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Content-Type: application/json&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;lexicon_json&quot;: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &quot;lexicon&quot;: 1,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &quot;id&quot;: &quot;games.gamesgamesgamesgames.game&quot;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &quot;defs&quot;: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;main&quot;: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          &quot;type&quot;: &quot;record&quot;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          &quot;key&quot;: &quot;tid&quot;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          &quot;record&quot;: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;type&quot;: &quot;object&quot;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;properties&quot;: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">              &quot;title&quot;: { &quot;type&quot;: &quot;string&quot; }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    },</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;backfill&quot;: true</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  }&#39;</span></span></code></pre></div><p>HappyView now subscribes to <code>games.gamesgamesgamesgames.game</code> on Jetstream and starts indexing records.</p><h3 id="_4-query-records" tabindex="-1">4. Query records <a class="header-anchor" href="#_4-query-records" aria-label="Permalink to &quot;4. Query records&quot;">​</a></h3><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://localhost:3000/xrpc/games.gamesgamesgamesgames.listGames?limit=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span></span></code></pre></div><p>See <a href="./xrpc-api.html">XRPC API</a> for query and procedure details.</p>`,25)])])}const g=a(n,[["render",l]]);export{c as __pageData,g as default};
